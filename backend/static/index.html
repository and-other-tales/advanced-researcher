<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced Researcher</title>
  <link rel="stylesheet" href="/_next/static/css/a3f50cee5dffc9b6.css">
  <link rel="stylesheet" href="/_next/static/css/5f7584d6ea5d09c0.css">
  <script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script>
  <style>
    .debug-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: white;
      color: black;
      z-index: 10000;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    .debug-content {
      margin-bottom: 10px;
    }
    .debug-btn {
      padding: 5px 10px;
      margin-right: 10px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }
    .debug-hide {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Debug overlay -->
  <div class="debug-overlay" id="debugOverlay">
    <div class="debug-content">
      <h2>Advanced Researcher Debug</h2>
      <p>Page loaded at: <span id="loadTime"></span></p>
      <p>URL: <span id="pageUrl"></span></p>
      <p>Script errors: <span id="scriptErrors">None detected yet</span></p>
      <p>Static files: <span id="staticFiles">Checking...</span></p>
      <p>API status: <span id="apiStatus">Checking...</span></p>
    </div>
    <button class="debug-btn" onclick="checkStaticFiles()">Check Static Files</button>
    <button class="debug-btn" onclick="checkAPI()">Check API</button>
    <button class="debug-btn" onclick="hideDebug()">Hide Debug</button>
    <button class="debug-btn" onclick="showApp()">Show App</button>
  </div>

  <div id="__next"></div>
  <script src="/_next/static/chunks/webpack-e0493dd8b1a8c5a8.js" onerror="scriptLoadError('webpack')"></script>
  <script src="/_next/static/chunks/framework-43665103d101a22d.js" onerror="scriptLoadError('framework')"></script>
  <script src="/_next/static/chunks/main-3dda665f828a0c7c.js" onerror="scriptLoadError('main')"></script>
  <script src="/_next/static/chunks/pages/_app-6ca4a4ec31e39f3d.js" onerror="scriptLoadError('app')"></script>
  <script src="/_next/static/chunks/262-eab41b7250d49b01.js" onerror="scriptLoadError('262')"></script>
  <script src="/_next/static/chunks/fd9d1056-5a1d07d623be4db4.js" onerror="scriptLoadError('fd9d1056')"></script>
  <script src="/_next/static/chunks/864-f4a36650c73b5fc5.js" onerror="scriptLoadError('864')"></script>
  <script src="/_next/static/chunks/app/page-fa4e3848b76dedc7.js" onerror="scriptLoadError('page')"></script>
  <script src="/_next/static/chunks/main-app-91b84db9219a4b72.js" onerror="scriptLoadError('main-app')"></script>
  <script src="/_next/static/chunks/app/layout-9c1559dfda0c1f72.js" onerror="scriptLoadError('layout')"></script>
  <script src="/_next/static/bXAcNtf2RDWsQ6bdbXU9n/_buildManifest.js" onerror="scriptLoadError('buildManifest')"></script>
  <script src="/_next/static/bXAcNtf2RDWsQ6bdbXU9n/_ssgManifest.js" onerror="scriptLoadError('ssgManifest')"></script>

  <script>
    // Debug functions
    document.getElementById('loadTime').textContent = new Date().toISOString();
    document.getElementById('pageUrl').textContent = window.location.href;
    
    // Track script load errors
    let errors = [];
    function scriptLoadError(script) {
      errors.push(`Failed to load ${script} script`);
      document.getElementById('scriptErrors').textContent = errors.join(', ');
    }

    // Check static files
    async function checkStaticFiles() {
      const filesToCheck = [
        '/_next/static/css/a3f50cee5dffc9b6.css',
        '/_next/static/chunks/webpack-e0493dd8b1a8c5a8.js',
        '/_next/static/chunks/framework-43665103d101a22d.js',
        '/_next/static/chunks/864-f4a36650c73b5fc5.js',
        '/_next/static/chunks/main-app-91b84db9219a4b72.js'
      ];
      
      const results = [];
      
      for (const file of filesToCheck) {
        try {
          const response = await fetch(file, { method: 'HEAD' });
          results.push(`${file.split('/').pop()}: ${response.ok ? '✅' : '❌'}`);
        } catch (error) {
          results.push(`${file.split('/').pop()}: ❌ Error: ${error.message}`);
        }
      }
      
      document.getElementById('staticFiles').innerHTML = results.join(', ');
    }

    // Check API
    async function checkAPI() {
      try {
        const response = await fetch('/health');
        const data = await response.json();
        document.getElementById('apiStatus').textContent = 
          `Health endpoint: ${data.status === 'ok' ? '✅ OK' : '❌ Error'}`;
      } catch (error) {
        document.getElementById('apiStatus').textContent = 
          `Health endpoint: ❌ Error: ${error.message}`;
      }
    }

    // Hide debug overlay
    function hideDebug() {
      document.getElementById('debugOverlay').classList.add('debug-hide');
    }

    // Show React app only (hide Next.js loading elements)
    function showApp() {
      const appDiv = document.createElement('div');
      appDiv.innerHTML = '<h1 style="color: white; padding: 20px;">Advanced Researcher</h1><p style="color: white; padding: 0 20px;">Unable to load the application. Please check the console for errors.</p>';
      document.body.appendChild(appDiv);
    }

    // Run checks on page load
    window.onload = function() {
      checkStaticFiles();
      checkAPI();
    };

    // Catch global errors
    window.onerror = function(message, source, lineno, colno, error) {
      errors.push(`JS Error: ${message} (${source}:${lineno}:${colno})`);
      document.getElementById('scriptErrors').textContent = errors.join(', ');
      return false;
    };
  </script>
</body>
</html>
